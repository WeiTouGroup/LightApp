!function(){var e=1;nb.define({name:"nb.bs.model.Carousel",parent:"nb.Model",method:{init:function(){this._$initModel(),this._$initEvent(),this._$initData()},_$initModel:function(){var e=new nb.Model,t=new nb.Model;this.set("indicatorsModel",e),this.set("itemsModel",t),e.set("itemType","nb.bs.view.carousel.Indicator"),t.set("itemType","nb.bs.view.carousel.Item")},_$initEvent:function(){this.onChange({name:"items",scope:this,fn:function(e){var t=e.data,n=this.get("carouseIdRef"),a=this.get("indicatorsModel"),i=this.get("itemsModel"),s=[],o=[];t&&$.each(t,function(e,t){var a={carouseIdRef:n,index:e},i={carouseIdRef:n,index:e};$.each(t,function(e,t){i[e]=t}),o.push(a),s.push(i)}),a.set("items",o),i.set("items",s)}})},_$initData:function(){var t="nb-bs-carousel-"+ +e++,n="#"+t;this.set("carouselId",t),this.set("carouselIdRef",n)}}})}(),nb.define({name:"nb.bs.model.Table",parent:"nb.Model",method:{init:function(){this.onChange({name:"showStriped",scope:this,fn:function(e){var t="";1==e.data&&(t="table-striped"),this.set("striped",t)}}),this.onChange({name:"showBorder",scope:this,fn:function(e){var t="";1==e.data&&(t="table-bordered"),this.set("border",t)}})}}}),nb.define({name:"nb.bs.model.Pagination",parent:"nb.Model",method:{init:function(){this._initData(),this._initEvent()},setOpts:function(e){var t=e.index||1,n=e.total;this.set("group",e.group||null,{skipSameValue:!1}),this.set("total",n,{skipSameValue:!1}),this.set("index",t,{skipSameValue:!1})},showNextGroup:function(){var e=this.get("groupIndex"),t=this.get("group"),n=t.count,a=n*e+n+1;e++,this.set("requireIndex",a)},showPreviousGroup:function(){var e=this.get("groupIndex"),t=this.get("group"),n=t.count,a=n*(e-1)+n;e--,this.set("requireIndex",a)},showNextPage:function(){var e=this.get("index");e++,this.set("requireIndex",e)},showPreviousPage:function(){var e=this.get("index");e--,this.set("requireIndex",e)},_initData:function(){var e=5;this.set("defaultMaxPageCount",e),this.set("group",{count:e})},_initEvent:function(){this.onChange({name:"total",scope:this,fn:function(e){for(var t,n=e.data,a=[],i=0;n>i;i++)t=new nb.Model,t.set("index",i+1),a.push(t);this.set("allPage",a)}}),this.onChange({name:"requireIndex",scope:this,fn:function(e){var t=e.data;this.onRequireIndex(t)}}),this.onChange({name:"index",scope:this,fn:function(e){var t=e.data,n=e.origin,a=this.get("group"),i=this.get("total"),s=this.get("allPage"),o="disabled",l="disabled";if(a){var d=a.count,r=Math.ceil(t/d)-1,h="disabled",c="disabled";this.set("groupIndex",r,{skipSameValue:!1}),t>d&&(h="enabled"),i>r*d+d&&(c="enabled"),this.set("previousGroupState",h),this.set("nextGroupState",c)}else this.set("pages",s);t>1&&(o="enabled"),i>t&&(l="enabled"),this.set("previousPageState",o),this.set("nextPageState",l),n&&s[n-1].set("active",""),s[t-1].set("active","active")}}),this.onChange({name:"group",scope:this,fn:function(e){var t=e.data;t?(t.count=t.count||this.get("defaultMaxPageCount"),this.set("previousGroupState",""),this.set("nextGroupState","")):(this.set("previousGroupState","hidden"),this.set("nextGroupState","hidden"))}}),this.onChange({name:"groupIndex",scope:this,fn:function(e){this._updateGroupIndex(e.data)}})},onRequireIndex:function(e){this.set("index",e)},_updateGroupIndex:function(e){for(var t,n=this.get("group"),a=this.get("allPage"),i=this.get("total"),s=n.count,o=e*s,l=o+s,d=[];l>o&&i>o;o++)t=1,d.push(a[o]);this.set("pages",d)}}}),function(){var e=nb.define({parent:"nb.bs.model.Pagination",method:{onRequireIndex:function(e){}}});nb.define({name:"nb.bs.model.PaginationTable",parent:"nb.Model",method:{init:function(){this._initModel(),this._initData(),this._initEvent()},_initEvent:function(){var e=this.get("table"),t=this.get("pagination");this.onChange({name:"currentRows",scope:this,fn:function(t){var n=t.data;e.set("rows",n)}}),t.onChange({name:"index",scope:this,fn:function(e){var t=e.data;this.onIndexChange(t)}})},onIndexChange:function(e){},getPaginationType:function(){return e},_initModel:function(){var e=new nb.bs.model.Table,t=this.getPaginationType(),n=new t;this.set("table",e),this.set("pagination",n)},_initData:function(){this.set("defaultMaxItemCount",10),this._initTable(),this._initPagination()},_initTable:function(){var e=this.get("table");e.set("showStriped",!0),e.set("showBorder",!0)},_initPagination:function(){}}})}(),nb.define({name:"nb.bs.model.DataSetPaginationTable",parent:"nb.bs.model.PaginationTable",method:{getPaginationType:function(){return nb.getType("nb.bs.model.Pagination")},_initEvent:function(){this.parent();this.get("pagination"),this.get("table");this.onChange({name:"maxItemCount",scope:this,fn:function(e){var t=e.data,n=this.get("rows"),a=this.set("defaultMaxItemCount");0>=t&&(t=a,this.set("maxItemCount",a)),n&&this.set("rows",n,{skipSameValue:!1})}}),this.onChange({name:"rows",scope:this,fn:function(e){var t=this.get("defaultMaxItemCount"),n=this.get("pagination"),a=(this.get("table"),0),i=e.data||[],s=i.length;this.set("groupIndex",0),this.set("total",a),a=Math.ceil(s/t),this.set("total",a),this.set("index",1,{skipSameValue:!1}),n.setOpts({total:a,index:1,group:{count:5}})}})},onRequireIndex:function(e){},onIndexChange:function(e){for(var t=this.get("rows")||[],n=this.get("maxItemCount")||10,a=(e-1)*n,i=a,s=[],o=t.length;a+n>i;i++)o>i&&s.push(t[i]);this.set("currentRows",s,{skipSameValue:!1})}}}),nb.define({name:"nb.bs.view.carousel.Indicator",view:{tag:"li","data-target":nb.bind("carouselIdRef"),"data-slide-to":nb.bind("index")}}),nb.define({name:"nb.bs.view.carousel.Item",view:{"class":"item",$html:[{tag:"img",src:nb.bind("image")}]}}),function(){var e=nb.define({parent:"nb.view.List",view:{tag:"ol","class":"carousel-indicators"}});nb.define({name:"nb.bs.view.Carousel",view:{id:nb.bind("carouselId"),"class":"carousel slide",$html:[{$name:"indicators",$type:e,$model:"indicatorsModel"},{$name:"inner",$type:"nb.view.List",$model:"itemsModel","class":"carousel-inner",role:"listbox"},{tag:"a","class":"left carousel-control",href:nb.bind("carouselIdRef"),role:"button","data-slide":"prev",$html:[{tag:"span","class":"glyphicon glyphicon-chevron-left","aria-hidden":"true"},{tag:"span","class":"sr-only",$text:"Previous"}]},{tag:"a","class":"right carousel-control",href:nb.bind("carouselIdRef"),role:"button","data-slide":"next",$html:[{tag:"span","class":"glyphicon glyphicon-chevron-right","aria-hidden":"true"},{tag:"span","class":"sr-only",$text:"Next"}]}]},method:{init:function(){var e=this;this.$().on("slid.bs.carousel",function(t){var n=$(t.relatedTarget),a=n.attr("data-list-index"),i=e.getModel();i.set("currentActiveIndex",a)})},onModelReady:function(e){e.onChange({name:"items",scope:this,fn:function(t){var n=this.$("indicators"),a=this.$("inner"),i=n.children();$(i[0]).addClass("active"),i=a.children(),$(i[0]).addClass("active"),e.set("currentActiveIndex",0)}})}}})}();var seq=1;nb.define({name:"nb.bs.view.Table",model:"nb.bs.model.Table",view:{tag:"table","class":["table",nb.bind("striped"),nb.bind("border")],$html:[{$type:"nb.bs.view.TableHeader",$model:{columns:"columns"}},{$type:"nb.bs.view.TableBody",$model:{rows:"rows"}}]}}),nb.define({name:"nb.bs.view.TableHeader",view:{tag:"thead",$html:{$name:"tr",tag:"tr"}},method:{onModelReady:function(e){e.onChange({name:"columns",scope:this,fn:function(e){var t=e.data,n=this.$("tr"),a=nb.get("nb.bs.view.TableHeaderColumn");n.empty(),$.each(t,function(e,t){var i=new a;i.setData(t),n.append(i.$())})}})}}}),nb.define({name:"nb.bs.view.TableCell",view:{tag:"td",$text:nb.bind("text"),colspan:nb.bind("colspan")},method:{setData:function(e){if("object"==typeof e){var t=e.type,n=e.data||e.model,a=nb.getType(t);a?this._type(a,n):this.setOpts(e)}else this.setOpts({text:e})},_type:function(e,t){var n=this.$(),a=new e;t&&a.setOpts(t),n.append(a.$())}}}),nb.define({name:"nb.bs.view.TableHeaderColumn",parent:"nb.bs.view.TableCell",view:{tag:"th",$text:nb.bind("text"),colspan:nb.bind("colspan")}}),nb.define({name:"nb.bs.view.TableBodyColumn",parent:"nb.bs.view.TableCell"}),nb.define({name:"nb.bs.view.TableBody",view:{tag:"tbody"},method:{onModelReady:function(e){var t=this.$();e.onChange({name:"rows",scope:this,fn:function(e){var n=e.data,a=nb.bs.view.TableRow;t.empty(),$.each(n,function(e,n){var i=new a,s=i.$();s.attr("data-index",e),i.setOpts({list:n}),t.append(s)})}})}}}),nb.define({name:"nb.bs.view.TableRow",view:{tag:"tr"},method:{onModelReady:function(e){var t=this.$();e.onChange({name:"list",scope:this,fn:function(e){var n=e.data,a=nb.bs.view.TableBodyColumn;$.each(n,function(e,n){var i=new a,s=i.$();s.addClass("td-"+e),s.attr("data-index",e),i.setData(n),t.append(s)})}})}}}),nb.define({name:"nb.bs.view.Pagination",view:{tag:"ul","class":"pagination",$html:[{$name:"previousGroup",tag:"li","class":["group-control previous",nb.bind("previousGroupState")],$html:{tag:"a",href:"#","aria-label":"Previous Group",$html:{tag:"span","class":"glyphicon glyphicon-backward","aria-hidden":"true"}}},{$name:"previousPage",tag:"li","class":["page-control previous",nb.bind("previousPageState")],$html:{tag:"a",href:"#","aria-label":"Previous Page",$html:{tag:"span","class":"glyphicon glyphicon-triangle-left","aria-hidden":"true"}}},{$name:"nextPage",tag:"li","class":["page-control next",nb.bind("nextPageState")],$html:{tag:"a",href:"#","aria-label":"Next Page",$html:{tag:"span","class":"glyphicon glyphicon-triangle-right","aria-hidden":"true"}}},{$name:"nextGroup",tag:"li","class":["group-control next",nb.bind("nextGroupState")],$html:{tag:"a",href:"#","aria-label":"Next Group",$html:{tag:"span","class":"glyphicon glyphicon-forward","aria-hidden":"true"}}}]},method:{init:function(){var e=this,t=this.$();t.on("click",".page-no",function(t){var n=e.getModel(),a=$(this),i=a.attr("data-index");n.set("requireIndex",i)}),t.on("click",".group-control.previous.enabled",function(t){var n=e.getModel();n.showPreviousGroup()}),t.on("click",".group-control.next.enabled",function(t){var n=e.getModel();n.showNextGroup()}),t.on("click",".page-control.previous.enabled",function(t){var n=e.getModel();n.showPreviousPage()}),t.on("click",".page-control.next.enabled",function(t){var n=e.getModel();n.showNextPage()})},onModelReady:function(e){e.onChange({name:"pages",scope:this,fn:function(e){var t=nb.get("nb.bs.view.Pagination.Page"),n=e.data,a=this.$("previousGroup"),i=this.$("previousPage"),s=this.$("nextPage"),o=this.$("nextGroup"),l=this.$();l.empty(),l.append(a),l.append(i),$.each(n,function(e,n){var a=new t;a.setOpts(n),l.append(a.$())}),l.append(s),l.append(o)}}),e.onChange({name:"pageNO",scope:this,fn:function(e){var t=e.data,n=this.$(),a=n.find("[data-index="+t+"]");n.find("li").removeClass("active"),a.addClass("active")}})}}}),nb.define({name:"nb.bs.view.Pagination.Page",view:{tag:"li","class":["page-no",nb.bind("active")],"data-index":nb.bind("index"),$html:{$name:"a",tag:"a",href:"#",$text:nb.bind("index")}}}),nb.define({name:"nb.bs.Dialog",view:{"class":"modal fade",tabindex:-1,role:"dialog",$html:{"class":"modal-dialog confirm",$html:{$name:"content","class":"modal-content",$html:[{$name:"header","class":"modal-header",$html:[{tag:"button",type:"button","class":"close","data-dismiss":"modal","aria-label":"Close",$html:{tag:"span","aria-hidden":"true",$text:"×"}},{tag:"h4","class":"modal-title",$text:nb.bind("title")}]},{$name:"body","class":"modal-body",$slot:"body"},{$name:"footer","class":"modal-footer",$slot:"footer"}]}}},method:{show:function(){this.$().modal({backdrop:"static"})}}}),function(){var e=nb.define({view:[{$name:"text",tag:"p","class":"msg",$text:nb.bind("msg")}]}),t=nb.define({view:[{"class":"col-xs-6",$html:{$name:"btnConfirm",tag:"button",type:"button","class":"btn btn-primary btn-block confirm",$html:"确定"}},{"class":"col-xs-6",$html:{$name:"btnCancel",tag:"button",type:"button","class":"btn btn-default btn-block cancel","data-dismiss":"modal",$html:"取消"}}]});nb.define({name:"nb.bs.dialog.Confirm",parent:"nb.bs.Dialog",slot:{body:["html",{$type:e,$model:""}],footer:["html",{$name:"buttonGroup",$type:t}]},method:{init:function(){var e=this,t=this.$();this.$("buttonGroup",!0).$("btnConfirm").on("click",function(n){e._confirmFlag=!0;var a=e.getModel()||{},i=a.get("scope"),s=a.get("confirm"),o=!0;s&&(o=s.call(i)),o&&t.modal("hide")}),t.on("hide.bs.modal",function(t){var n=e.getModel()||{},a=n.get("scope"),i=n.get("cancel");return e._confirmFlag?void 0:i?i.call(a):void 0})},setOpts:function(e){this.parent(e)},show:function(){this.parent(),this._confirmFlag=!1}}})}();